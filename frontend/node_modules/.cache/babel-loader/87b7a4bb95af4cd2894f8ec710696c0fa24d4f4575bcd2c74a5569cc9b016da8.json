{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import'../css/ScheduleForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ScheduleForm(_ref){let{onSuccess}=_ref;const[form,setForm]=useState({texto:'',tipo:'DIARIO',hora:'',dias_semana:'',intervalo:'',imagem:null});const handleChange=e=>{const{name,value}=e.target;setForm(prev=>({...prev,[name]:value}));};const handleFileChange=e=>{setForm(prev=>({...prev,imagem:e.target.files[0]}));};const handleSubmit=async e=>{e.preventDefault();const token=localStorage.getItem('token');if(!token){alert('Token não encontrado. Faça login novamente.');return;}const data=new FormData();Object.entries(form).forEach(_ref2=>{let[key,value]=_ref2;if(value)data.append(key,value);});try{await axios.post('http://localhost:3001/api/schedules',data,{headers:{Authorization:`Bearer ${token}`,'Content-Type':'multipart/form-data'}});setForm({texto:'',tipo:'DIARIO',hora:'',dias_semana:'',intervalo:'',imagem:null});if(onSuccess)onSuccess();}catch(err){var _err$response,_err$response2;if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401||((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status)===403){alert('Sessão expirada. Faça login novamente.');localStorage.removeItem('token');}else{console.error('Erro ao salvar agendamento:',err);alert('Erro ao salvar agendamento. Verifique os campos.');}}};return/*#__PURE__*/_jsxs(\"form\",{className:\"form-agendamento\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Texto da Mensagem:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"texto\",placeholder:\"Texto da mensagem\",onChange:handleChange,value:form.texto,required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Tipo:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"tipo\",onChange:handleChange,value:form.tipo,children:[/*#__PURE__*/_jsx(\"option\",{value:\"DIARIO\",children:\"Di\\xE1rio\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SEMANAL\",children:\"Semanal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MENSAL\",children:\"Mensal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RECORRENTE\",children:\"Recorrente\"})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Hora de Execu\\xE7\\xE3o:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"hora\",type:\"time\",onChange:handleChange,value:form.hora}),/*#__PURE__*/_jsx(\"label\",{children:\"Dias da Semana:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"dias_semana\",placeholder:\"Ex: SEG,QUA,SEX\",onChange:handleChange,value:form.dias_semana}),/*#__PURE__*/_jsx(\"label\",{children:\"Intervalo (horas):\"}),/*#__PURE__*/_jsx(\"input\",{name:\"intervalo\",placeholder:\"Ex: 8\",onChange:handleChange,value:form.intervalo}),/*#__PURE__*/_jsx(\"label\",{children:\"Imagem:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"imagem\",type:\"file\",accept:\"image/png, image/jpeg\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Salvar Agendamento\"})]});}export default ScheduleForm;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","ScheduleForm","_ref","onSuccess","form","setForm","texto","tipo","hora","dias_semana","intervalo","imagem","handleChange","e","name","value","target","prev","handleFileChange","files","handleSubmit","preventDefault","token","localStorage","getItem","alert","data","FormData","Object","entries","forEach","_ref2","key","append","post","headers","Authorization","err","_err$response","_err$response2","response","status","removeItem","console","error","className","onSubmit","children","placeholder","onChange","required","type","accept"],"sources":["D:/Projetos/Ti_alerts/frontend/src/components/ScheduleForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport '../css/ScheduleForm.css';\r\n\r\nfunction ScheduleForm({ onSuccess }) {\r\n  const [form, setForm] = useState({\r\n    texto: '',\r\n    tipo: 'DIARIO',\r\n    hora: '',\r\n    dias_semana: '',\r\n    intervalo: '',\r\n    imagem: null\r\n  });\r\n\r\n  const handleChange = e => {\r\n    const { name, value } = e.target;\r\n    setForm(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleFileChange = e => {\r\n    setForm(prev => ({ ...prev, imagem: e.target.files[0] }));\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      alert('Token não encontrado. Faça login novamente.');\r\n      return;\r\n    }\r\n\r\n    const data = new FormData();\r\n    Object.entries(form).forEach(([key, value]) => {\r\n      if (value) data.append(key, value);\r\n    });\r\n\r\n    try {\r\n      await axios.post('http://localhost:3001/api/schedules', data, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      });\r\n\r\n      setForm({\r\n        texto: '',\r\n        tipo: 'DIARIO',\r\n        hora: '',\r\n        dias_semana: '',\r\n        intervalo: '',\r\n        imagem: null\r\n      });\r\n\r\n      if (onSuccess) onSuccess();\r\n    } catch (err) {\r\n      if (err.response?.status === 401 || err.response?.status === 403) {\r\n        alert('Sessão expirada. Faça login novamente.');\r\n        localStorage.removeItem('token');\r\n      } else {\r\n        console.error('Erro ao salvar agendamento:', err);\r\n        alert('Erro ao salvar agendamento. Verifique os campos.');\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className=\"form-agendamento\" onSubmit={handleSubmit}>\r\n      <label>Texto da Mensagem:</label>\r\n      <input\r\n        name=\"texto\"\r\n        placeholder=\"Texto da mensagem\"\r\n        onChange={handleChange}\r\n        value={form.texto}\r\n        required\r\n      />\r\n\r\n      <label>Tipo:</label>\r\n      <select name=\"tipo\" onChange={handleChange} value={form.tipo}>\r\n        <option value=\"DIARIO\">Diário</option>\r\n        <option value=\"SEMANAL\">Semanal</option>\r\n        <option value=\"MENSAL\">Mensal</option>\r\n        <option value=\"RECORRENTE\">Recorrente</option>\r\n      </select>\r\n\r\n      <label>Hora de Execução:</label>\r\n      <input\r\n        name=\"hora\"\r\n        type=\"time\"\r\n        onChange={handleChange}\r\n        value={form.hora}\r\n      />\r\n\r\n      <label>Dias da Semana:</label>\r\n      <input\r\n        name=\"dias_semana\"\r\n        placeholder=\"Ex: SEG,QUA,SEX\"\r\n        onChange={handleChange}\r\n        value={form.dias_semana}\r\n      />\r\n\r\n      <label>Intervalo (horas):</label>\r\n      <input\r\n        name=\"intervalo\"\r\n        placeholder=\"Ex: 8\"\r\n        onChange={handleChange}\r\n        value={form.intervalo}\r\n      />\r\n\r\n      <label>Imagem:</label>\r\n      <input\r\n        name=\"imagem\"\r\n        type=\"file\"\r\n        accept=\"image/png, image/jpeg\"\r\n        onChange={handleFileChange}\r\n      />\r\n\r\n      <button type=\"submit\">Salvar Agendamento</button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default ScheduleForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}